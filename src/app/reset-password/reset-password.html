<div class="container">
    <div class="form-container">
        <h2 class="form-title">Reset Password</h2>

        <div *ngIf="!formData.code" class="alert alert-error">
            Invalid reset link. Please use the link sent to your email.
        </div>

        <div *ngIf="error" class="alert alert-error">
            {{error}}
        </div>

        <div *ngIf="success" class="alert alert-success">
            {{success}}
        </div>

        <div *ngIf="formData.code">
            <div class="reset-code-info">
                <p>
                    <strong>Reset Code:</strong> {{formData.code}}
                </p>
                <small>This code was extracted from your reset link</small>
            </div>

            <form (ngSubmit)="handleSubmit($event)">
                <div class="form-group">
                    <label class="form-label">New Password</label>
                    <input type="password" name="newPassword" class="form-input" [(ngModel)]="formData.newPassword"
                        placeholder="Enter your new password" required minlength="5" />
                    <small class="form-help">Must be at least 5 characters long</small>
                </div>

                <div class="form-group">
                    <label class="form-label">Confirm New Password</label>
                    <input type="password" name="confirmPassword" class="form-input"
                        [(ngModel)]="formData.confirmPassword" placeholder="Confirm your new password" required
                        minlength="5" />
                </div>

                <button type="submit" class="form-btn">
                    Reset Password
                </button>
            </form>
        </div>

        <div class="form-link">
            <p>
                Remember your password? <a routerLink="/login">Back to Login</a>
            </p>
            <p class="mt-1">
                Need a new reset link? <a routerLink="/forgot-password">Request again</a>
            </p>
        </div>

        <!-- Password Requirements -->
        <div class="password-requirements">
            <h4>Password Requirements:</h4>
            <ul>
                <li [class.requirement-met]="isPasswordLengthValid">
                    At least 4 characters long
                </li>
                <li [class.requirement-met]="doPasswordsMatch">
                    Passwords match
                </li>
            </ul>
        </div>
    </div>
</div>